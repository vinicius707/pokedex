<div class="pokemon-list-container">
  <app-search-filter></app-search-filter>

  <div *ngIf="pokemonService.loading()" class="loading">
    <div class="loading__spinner"></div>
    <p>Carregando pokémons...</p>
  </div>

  <div class="pokemon-grid" *ngIf="!pokemonService.loading()">
    <app-pokemon-card
      *ngFor="let pokemon of pokemonService.filteredPokemons(); trackBy: trackByPokemon"
      [pokemon]="pokemon"
      [isFavorite]="isFavorite(pokemon.id)"
      (cardClick)="onCardClick($event)"
      (favoriteToggle)="onFavoriteToggle($event)"
    ></app-pokemon-card>
  </div>

  <div 
    class="no-results" 
    *ngIf="!pokemonService.loading() && pokemonService.filteredPokemons().length === 0"
  >
    <p>Nenhum Pokémon encontrado com os filtros selecionados.</p>
  </div>

  <div class="pagination-container" *ngIf="pokemonService.totalPages() > 0 && !pokemonService.searchTerm() && !pokemonService.selectedType()">
    <nav class="pagination" aria-label="Paginação de pokémons">
      <ng-container *ngIf="paginationInfo() as info">
        <div class="pagination-controls">
          <button
            *ngIf="info.showFirst"
            class="pagination-button pagination-button--first"
            (click)="goToFirstPage()"
            aria-label="Ir para primeira página"
            type="button"
          >
            Primeira
          </button>

          <button
            *ngIf="info.showPrevious"
            class="pagination-button pagination-button--prev"
            (click)="previousPage()"
            aria-label="Ir para página anterior"
            type="button"
          >
            <span aria-hidden="true">«</span> Anterior
          </button>

          <div class="pagination-numbers" role="list">
            <button
              *ngFor="let item of info.items; trackBy: trackByPageItem"
              class="pagination-number"
              [class.pagination-number--ellipsis]="isEllipsis(item)"
              [class.pagination-number--active]="isCurrentPageItem(item, info.currentPage)"
              [attr.aria-label]="getPageNumber(item) ? 'Ir para página ' + getPageNumber(item) : null"
              [attr.aria-current]="isCurrentPageItem(item, info.currentPage) ? 'page' : null"
              [disabled]="isEllipsis(item)"
              (click)="onPageClick(item)"
              type="button"
              role="listitem"
            >
              <span *ngIf="isEllipsis(item)" aria-hidden="true">...</span>
              <span *ngIf="!isEllipsis(item)">{{ item }}</span>
            </button>
          </div>

          <button
            *ngIf="info.showNext"
            class="pagination-button pagination-button--next"
            (click)="nextPage()"
            aria-label="Ir para próxima página"
            type="button"
          >
            Próxima <span aria-hidden="true">»</span>
          </button>

          <button
            *ngIf="info.showLast"
            class="pagination-button pagination-button--last"
            (click)="goToLastPage()"
            aria-label="Ir para última página"
            type="button"
          >
            Última
          </button>
        </div>
      </ng-container>
    </nav>
  </div>
</div>
